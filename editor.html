<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Edit Resume</title>

  <!-- Foundation CSS framework (Bootstrap and jQueryUI also supported) -->
  <link href="https://bootswatch.com/flatly/bootstrap.css" rel="stylesheet">
  <!-- Font Awesome icons (Bootstrap, Foundation, and jQueryUI also supported) -->
  <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <script src="js/jsoneditor.js"></script>

  <script>
    // Set the default CSS theme and icon library globally
    JSONEditor.defaults.theme = 'bootstrap3';
    JSONEditor.defaults.iconlib = 'fontawesome4';
  </script>
</head>

<body>
  <div class="container">
    <div class='row'>
      <div class='col-lg-6'>
        <button id='submit' class='btn btn-primary'>Submit</button>
        <button id='restore' class='btn btn-default'>Restore to Default</button>
        <span id='valid_indicator' class='label'></span>
      </div>
    </div>
    <div class='row'>
      <div id='editor_holder' class='col-lg-12'></div>
    </div>
  </div>

  <script>
  var starting_value ="";

    // Initialize the editor
    var editor = new JSONEditor(document.getElementById('editor_holder'), {
      // Enable fetching schemas via ajax
      ajax: true,
      disable_properties: true,
      disable_edit_json: true,
      //theme: 'bootstrap2',
      // The schema for the editor
      schema: {
        $ref: "resume.json",
        format: "grid"
      },
    });

    // Hook up the submit button to log to the console
    document.getElementById('submit').addEventListener('click', function() {
      // Get the value from the editor
      console.log(editor.getValue());
    });

    // Hook up the Restore to Default button
    document.getElementById('restore').addEventListener('click', function() {
      editor.destroy();

    });

    // Hook up the validation indicator to update its
    // status whenever the editor changes
    editor.on('change', function() {
      // Get an array of errors from the validator
      var errors = editor.validate();
      var indicator = document.getElementById('valid_indicator');

      // Not valid
      if (errors.length) {
        indicator.className = 'label alert';
        indicator.textContent = 'not valid';
      }
      // Valid
      else {
        indicator.className = 'label success';
        indicator.textContent = 'valid';
      }
    });
  </script>
</body>

</html>
